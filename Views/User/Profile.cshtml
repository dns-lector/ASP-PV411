@model ASP_PV411.Models.User.UserProfileViewModel
@{
    ViewData["Title"] = "Profile";
    bool isAuthenticated = Context.User.Identity?.IsAuthenticated ?? false;
}

<div class="text-center">
    <h1 class="display-4">Кабінет користувача</h1>
</div>

@if (!isAuthenticated)
{
	<div id="auth-error" class="alert alert-danger text-center mt-4" role="alert">
		Для перегляду профілю користувача необхідно автентифікуватись
	</div>
}
else
{
	<div class="row mt-4">
		<div class="col col-sm-12 offset-sm-0  col-md-10 offset-md-1   col-lg-8 offset-lg-2  col-xl-6 offset-xl-3   col-xxl-4 offset-xxl-4">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>Назва</th>
						<th class="d-flex justify-content-between align-items-end">
							Значення 
							<button id="btn-profile-edit" title="Редагувати дані" type="button" class="btn btn-outline-warning">
								<i class="bi bi-pencil"></i>
							</button>
						</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Ім'я</td>
						<td data-profile-editable="Name">@Model.User.Name</td>
					</tr>
					<tr>
						<td>E-mail</td>
						<td data-profile-editable="Email">@Model.User.Email</td>
					</tr>
					<tr>
						<td>Логін</td>
						<td data-profile-editable="Login">@Model.User.Login</td>
					</tr>
					<tr style="display: none" data-profile-hidden>
						<td>Пароль</td>
						<td data-profile-editable="Password"></td>
					</tr>
					@if (@Model.User.Birthdate != null)
					{
						<tr>
							<td>Дата народження</td>
							<td>@Model.User.Birthdate.Value.ToString("dd.MM.yyyy")</td>
						</tr>
					}
					<tr>
						<td>Дата реєстрації</td>
						<td>@Model.User.RegisterAt.ToString("dd.MM.yyyy (HH:mm)")</td>
					</tr>
					<tr>
						<td>Роль (права)</td>
						<td>
							@Model.User.RoleId (
							@if (Model.User.Role.CanCreate > 0)
							{
								<b>C</b>
							}
							else
							{
								<s>C</s>
							}
							@if (Model.User.Role.CanRead > 0)
							{
								<b>R</b>
							}
							else
							{
								<s>R</s>
							}
							@if (Model.User.Role.CanUpdate > 0)
							{
								<b>U</b>
							}
							else
							{
								<s>U</s>
							}
							@if (Model.User.Role.CanDelete > 0)
							{
								<b>D</b>
							}
							else
							{
								<s>D</s>
							}
							)
						</td>
					</tr>
				</tbody>
			</table>
			<button id="btn-profile-delete" class="btn btn-danger">
				Видалити профіль
			</button>
		</div>
	</div>
	
}
@*
	Д.З. Розширити "персональний кабінет" користувача
	на відображення номеру телефону з можливістю його
	редагування. Забезпечити обробку і валідацію
	телефону у методі Update, провести тестування.
	До звіту з ДЗ додати скріншоти
*@